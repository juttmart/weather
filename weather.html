<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Neon Weather • 2025</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Modern Typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <style>
    :root {
      --bg-main: #020617;
      --glass-bg: rgba(15, 23, 42, 0.88);
      --glass-border: rgba(148, 163, 184, 0.55);
      --accent-blue: #0ea5e9;
      --accent-green: #22c55e;
      --accent-purple: #8b5cf6;
      --accent-yellow: #facc15;
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --radius-xl: 24px;
      --shadow-strong: 0 24px 70px rgba(15, 23, 42, 0.95);
      --transition-fast: 140ms ease-out;
      --transition-med: 220ms cubic-bezier(0.23, 1, 0.32, 1);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html,
    body {
      height: 100%;
    }

    body {
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
      color: var(--text-main);
      background: radial-gradient(circle at 0% 0%, #22c55e33 0, transparent 55%),
        radial-gradient(circle at 100% 100%, #8b5cf633 0, transparent 55%),
        radial-gradient(circle at 50% 0%, #0ea5e933 0, transparent 55%),
        #020617;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
      transition: background 0.9s ease;
    }

    /* Dynamic background themes */
    body.theme-clear {
      background:
        radial-gradient(circle at 0% 0%, #22c55e44 0, transparent 55%),
        radial-gradient(circle at 100% 100%, #0ea5e955 0, transparent 60%),
        linear-gradient(135deg, #0f172a, #0369a1);
    }

    body.theme-clouds {
      background:
        radial-gradient(circle at 0% 0%, #38bdf844 0, transparent 55%),
        radial-gradient(circle at 100% 100%, #64748b66 0, transparent 60%),
        linear-gradient(135deg, #020617, #111827);
    }

    body.theme-rain {
      background:
        radial-gradient(circle at 0% 0%, #0ea5e955 0, transparent 50%),
        radial-gradient(circle at 100% 100%, #1e293b88 0, transparent 65%),
        linear-gradient(145deg, #020617, #020617);
    }

    body.theme-thunder {
      background:
        radial-gradient(circle at 0% 0%, #0ea5e955 0, transparent 50%),
        radial-gradient(circle at 100% 100%, #a855f766 0, transparent 65%),
        linear-gradient(145deg, #020617, #020617);
    }

    body.theme-snow {
      background:
        radial-gradient(circle at 0% 0%, #e5f3ff55 0, transparent 55%),
        radial-gradient(circle at 100% 100%, #bfdbfe88 0, transparent 60%),
        linear-gradient(145deg, #0b1120, #1e293b);
    }

    body.theme-mist {
      background:
        radial-gradient(circle at 0% 0%, #38bdf844 0, transparent 55%),
        radial-gradient(circle at 100% 100%, #6b728080 0, transparent 60%),
        linear-gradient(135deg, #020617, #020617);
    }

    body.theme-night {
      background:
        radial-gradient(circle at 0% 0%, #22c55e33 0, transparent 55%),
        radial-gradient(circle at 100% 100%, #8b5cf688 0, transparent 60%),
        linear-gradient(145deg, #020617, #020617);
    }

    /* Floating background orbs */
    .bg-orb {
      position: fixed;
      border-radius: 999px;
      filter: blur(40px);
      opacity: 0.55;
      pointer-events: none;
      mix-blend-mode: screen;
      z-index: -1;
    }

    .bg-orb-1 {
      width: 420px;
      height: 420px;
      top: -60px;
      left: -40px;
      background: radial-gradient(circle at 30% 30%, #22c55e, transparent 65%);
      animation: orbFloat1 22s ease-in-out infinite alternate;
    }

    .bg-orb-2 {
      width: 520px;
      height: 520px;
      bottom: -120px;
      right: -80px;
      background: radial-gradient(circle at 60% 60%, #0ea5e9, transparent 65%);
      animation: orbFloat2 26s ease-in-out infinite alternate;
    }

    /* App shell / card */
    .app {
      width: min(100%, 520px);
      border-radius: var(--radius-xl);
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.18), transparent 55%),
        radial-gradient(circle at bottom right, rgba(34, 197, 94, 0.15), transparent 60%),
        var(--glass-bg);
      border: 1px solid var(--glass-border);
      box-shadow:
        var(--shadow-strong),
        0 0 0 1px rgba(15, 23, 42, 0.9),
        0 0 40px rgba(56, 189, 248, 0.35);
      backdrop-filter: blur(26px) saturate(1.4);
      -webkit-backdrop-filter: blur(26px) saturate(1.4);
      padding: 1.7rem 1.6rem 1.6rem;
      position: relative;
      overflow: hidden;
      animation: cardFadeIn 0.8s var(--transition-med) both;
    }

    .app::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: conic-gradient(
        from 240deg,
        rgba(56, 189, 248, 0.4),
        transparent 18%,
        transparent 60%,
        rgba(34, 197, 94, 0.5),
        transparent 82%
      );
      opacity: 0.12;
      mix-blend-mode: screen;
      animation: shellSweep 18s linear infinite;
      pointer-events: none;
    }

    .app-inner {
      position: relative;
      z-index: 1;
    }

    /* Top bar (brand + search) */
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 1.3rem;
      flex-wrap: wrap;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      min-width: 0;
    }

    .brand-mark {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #bbf7d0, #22c55e 40%, #0ea5e9 80%);
      box-shadow:
        0 0 0 1px rgba(191, 219, 254, 0.9),
        0 0 18px rgba(34, 197, 94, 0.95);
      position: relative;
      overflow: hidden;
    }

    .brand-mark::after {
      content: "";
      position: absolute;
      inset: 22%;
      border-radius: inherit;
      border: 1px solid rgba(248, 250, 252, 0.9);
      opacity: 0.9;
      mix-blend-mode: screen;
    }

    .brand-text {
      display: flex;
      flex-direction: column;
      gap: 0.04rem;
    }

    .brand-title {
      font-size: 0.9rem;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #e0f2ff;
      white-space: nowrap;
    }

    .brand-subtitle {
      font-size: 0.78rem;
      color: var(--text-soft);
      white-space: nowrap;
    }

    .search-bar {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 0.55rem;
      min-width: 0;
    }

    .search-input-wrap {
      position: relative;
      flex: 1;
    }

    .search-input {
      width: 100%;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background:
        radial-gradient(circle at top, rgba(15, 23, 42, 0.5), transparent 60%),
        rgba(15, 23, 42, 0.96);
      padding: 0.58rem 2.7rem 0.55rem 1rem;
      color: var(--text-main);
      font-size: 0.86rem;
      outline: none;
      transition:
        border-color var(--transition-med),
        box-shadow var(--transition-med),
        background var(--transition-med),
        transform var(--transition-fast);
    }

    .search-input::placeholder {
      color: rgba(148, 163, 184, 0.85);
    }

    .search-input:focus {
      border-color: rgba(56, 189, 248, 0.95);
      box-shadow:
        0 0 0 1px rgba(59, 130, 246, 0.9),
        0 0 24px rgba(56, 189, 248, 0.9);
      transform: translateY(-0.5px);
    }

    .btn-search,
    .btn-geo {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.75);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      font-size: 0.78rem;
      padding: 0.5rem 0.9rem;
      cursor: pointer;
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.3), transparent 65%),
        rgba(15, 23, 42, 0.98);
      color: #e5f2ff;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      font-weight: 600;
      transition:
        transform var(--transition-fast),
        box-shadow var(--transition-fast),
        border-color var(--transition-fast),
        background var(--transition-fast),
        color var(--transition-fast);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.9),
        0 12px 30px rgba(15, 23, 42, 0.95),
        0 0 24px rgba(56, 189, 248, 0.6);
      white-space: nowrap;
    }

    .btn-search {
      position: relative;
      padding-inline: 0.9rem;
    }

    .btn-search-label {
      display: inline-flex;
      align-items: center;
      gap: 0.2rem;
    }

    .btn-loader {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      border: 2px solid rgba(148, 163, 184, 0.45);
      border-top-color: rgba(56, 189, 248, 0.95);
      animation: spin 0.7s linear infinite;
      display: none;
    }

    .btn-geo {
      padding-inline: 0.6rem;
      min-width: 0;
    }

    .btn-geo-icon {
      font-size: 1.02rem;
    }

    .btn-search:hover,
    .btn-geo:hover {
      transform: translateY(-1px);
      border-color: rgba(56, 189, 248, 0.95);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 1),
        0 16px 34px rgba(15, 23, 42, 1),
        0 0 34px rgba(56, 189, 248, 0.9);
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.42), transparent 70%),
        rgba(15, 23, 42, 0.98);
      color: #f9fafb;
    }

    .btn-search:active,
    .btn-geo:active {
      transform: translateY(0.4px) scale(0.99);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.9),
        0 10px 24px rgba(15, 23, 42, 1),
        0 0 30px rgba(56, 189, 248, 0.8);
    }

    .app.loading .btn-search-label {
      opacity: 0;
    }

    .app.loading .btn-loader {
      display: inline-block;
    }

    /* Weather card */
    .weather-card {
      border-radius: 20px;
      padding: 1.3rem 1.15rem 1.2rem;
      background:
        radial-gradient(circle at top, rgba(15, 23, 42, 0.55), transparent 65%),
        rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.7);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.9),
        0 20px 40px rgba(15, 23, 42, 1),
        0 0 34px rgba(59, 130, 246, 0.3);
      display: flex;
      flex-direction: column;
      gap: 1.1rem;
      animation: fadeUp 0.6s var(--transition-med) both;
    }

    .weather-card.fade-in {
      animation: none;
    }

    .weather-card.fade-in-active {
      animation: fadeUp 0.55s var(--transition-med) both;
    }

    .card-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 0.8rem;
      flex-wrap: wrap;
    }

    .loc-block {
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
    }

    .city-name {
      font-size: 1.15rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .country-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: rgba(148, 163, 184, 0.95);
    }

    .country-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #bbf7d0, #22c55e);
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.9);
    }

    .datetime {
      font-size: 0.8rem;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 0.1rem;
      text-align: right;
    }

    .datetime-main {
      font-weight: 500;
    }

    .datetime-sub {
      font-size: 0.76rem;
    }

    /* Main display: icon + temps */
    .main-display {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.2rem;
      flex-wrap: wrap;
    }

    .weather-icon {
      width: 130px;
      height: 130px;
      position: relative;
      flex-shrink: 0;
    }

    .temp-block {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
      min-width: 0;
    }

    .temp-main {
      display: flex;
      align-items: flex-end;
      gap: 0.3rem;
      font-size: 2.6rem;
      line-height: 1;
      font-weight: 600;
    }

    .temp-unit {
      font-size: 1.2rem;
      color: rgba(148, 163, 184, 0.9);
      margin-bottom: 0.3rem;
    }

    .condition-text {
      font-size: 0.96rem;
      text-transform: capitalize;
      color: #e5f2ff;
    }

    .feels-like {
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    /* Metrics row */
    .metrics-row {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.7rem;
      font-size: 0.78rem;
    }

    .metric {
      border-radius: 14px;
      padding: 0.55rem 0.7rem;
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.16), transparent 70%),
        rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(148, 163, 184, 0.7);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.95),
        0 12px 26px rgba(15, 23, 42, 0.9);
      display: flex;
      flex-direction: column;
      gap: 0.18rem;
    }

    .metric-label {
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: rgba(148, 163, 184, 0.9);
      font-size: 0.68rem;
    }

    .metric-value {
      font-weight: 500;
      font-size: 0.9rem;
    }

    .metric-sub {
      font-size: 0.7rem;
      color: var(--text-soft);
    }

    .status-message {
      font-size: 0.78rem;
      color: rgba(148, 163, 184, 0.86);
      margin-top: 0.15rem;
      min-height: 1.1em;
    }

    .status-message.error {
      color: #fecaca;
    }

    .status-message.success {
      color: #bbf7d0;
    }

    /* Weather icons (CSS-based, animated) */
    .icon-sun,
    .icon-cloud,
    .icon-rain,
    .icon-snow,
    .icon-mist,
    .icon-thunder,
    .icon-night {
      width: 100%;
      height: 100%;
      position: relative;
    }

    /* Sun */
    .icon-sun .sun-core {
      position: absolute;
      inset: 26% 26%;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #fef9c3, #facc15 55%, #f97316);
      box-shadow:
        0 0 0 2px rgba(253, 224, 71, 0.8),
        0 0 32px rgba(253, 224, 71, 1);
      animation: pulse 3s ease-in-out infinite;
    }

    .icon-sun .sun-rays {
      position: absolute;
      inset: 15%;
      border-radius: 999px;
      border: 3px solid rgba(253, 224, 71, 0.7);
      box-shadow: 0 0 22px rgba(253, 224, 71, 0.9);
      animation: spin-slow 16s linear infinite;
    }

    /* Base cloud */
    .cloud {
      position: absolute;
      bottom: 24%;
      left: 16%;
      width: 68%;
      height: 42%;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #f9fafb, #cbd5f5);
      box-shadow:
        0 0 0 1px rgba(148, 163, 184, 0.8),
        0 16px 38px rgba(15, 23, 42, 0.9);
      animation: floatCloud 6s ease-in-out infinite;
    }

    .cloud::before,
    .cloud::after {
      content: "";
      position: absolute;
      border-radius: 999px;
      background: inherit;
    }

    .cloud::before {
      width: 52%;
      height: 70%;
      top: -42%;
      left: 6%;
    }

    .cloud::after {
      width: 46%;
      height: 64%;
      top: -36%;
      right: 6%;
    }

    .cloud-back {
      transform: scale(0.9) translateX(10px) translateY(6px);
      opacity: 0.76;
      filter: blur(1px);
      animation-duration: 10s;
    }

    /* Rain drops */
    .raindrop {
      position: absolute;
      width: 3px;
      height: 14px;
      border-radius: 999px;
      background: linear-gradient(to bottom, #e0f2fe, #0ea5e9);
      top: 56%;
      left: 32%;
      opacity: 0;
      animation: rainFall 0.9s linear infinite;
    }

    .raindrop:nth-child(2) {
      left: 46%;
      animation-delay: 0.18s;
    }

    .raindrop:nth-child(3) {
      left: 60%;
      animation-delay: 0.34s;
    }

    /* Snow flakes */
    .flake {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 999px;
      border: 2px solid rgba(226, 232, 240, 0.95);
      top: 52%;
      left: 32%;
      opacity: 0;
      animation: snowFall 1.7s ease-in infinite;
    }

    .flake:nth-child(2) {
      left: 50%;
      animation-delay: 0.3s;
    }

    .flake:nth-child(3) {
      left: 66%;
      animation-delay: 0.6s;
    }

    .mist-layer {
      position: absolute;
      inset: 62% 8% 14% 8%;
      border-radius: 999px;
      background: linear-gradient(
        to right,
        rgba(148, 163, 184, 0.1),
        rgba(148, 163, 184, 0.35),
        rgba(148, 163, 184, 0.1)
      );
      box-shadow: 0 0 18px rgba(148, 163, 184, 0.45);
      animation: drift 8s ease-in-out infinite;
    }

    .mist-layer::before,
    .mist-layer::after {
      content: "";
      position: absolute;
      inset: 40% 0 auto 0;
      border-radius: inherit;
      background: inherit;
      opacity: 0.7;
    }

    .mist-layer::after {
      inset: auto 0 42% 0;
      opacity: 0.5;
    }

    /* Moon + stars */
    .moon {
      position: absolute;
      inset: 24% 32% 38% 26%;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #f9fafb, #e5e7eb 55%, #9ca3af);
      box-shadow:
        0 0 0 1px rgba(226, 232, 240, 0.9),
        0 0 28px rgba(226, 232, 240, 0.8);
    }

    .moon::after {
      content: "";
      position: absolute;
      inset: 10% 10% 18% 26%;
      border-radius: inherit;
      background: #020617;
      opacity: 0.9;
    }

    .star {
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: #e5f2ff;
      box-shadow: 0 0 12px rgba(226, 232, 240, 0.9);
      opacity: 0.8;
      animation: twinkle 2.4s ease-in-out infinite alternate;
    }

    .star:nth-child(2) {
      top: 18%;
      left: 18%;
      animation-delay: 0.3s;
      transform: scale(0.8);
    }

    .star:nth-child(3) {
      top: 16%;
      right: 12%;
      animation-delay: 0.6s;
      transform: scale(0.9);
    }

    .star:nth-child(4) {
      top: 30%;
      right: 24%;
      animation-delay: 0.9s;
      transform: scale(0.7);
    }

    /* Thunder bolt */
    .bolt {
      position: absolute;
      bottom: 16%;
      left: 54%;
      width: 16px;
      height: 36px;
      background: linear-gradient(to bottom, #fef3c7, #facc15, #fb923c);
      clip-path: polygon(40% 0, 100% 0, 60% 48%, 90% 48%, 10% 100%, 40% 54%, 10% 54%);
      box-shadow:
        0 0 18px rgba(253, 224, 71, 0.95),
        0 0 32px rgba(253, 224, 71, 0.95);
      animation: blink 0.9s linear infinite;
    }

    /* Loading / reduced motion */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition: none !important;
        scroll-behavior: auto !important;
      }
    }

    /* Responsive tweaks */
    @media (max-width: 640px) {
      body {
        padding: 1.1rem;
      }

      .app {
        padding: 1.4rem 1.25rem 1.3rem;
        border-radius: 20px;
      }

      .top-bar {
        align-items: flex-start;
      }

      .brand-subtitle {
        display: none;
      }

      .search-bar {
        margin-left: auto;
      }

      .weather-icon {
        width: 110px;
        height: 110px;
      }

      .temp-main {
        font-size: 2.4rem;
      }

      .metrics-row {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 420px) {
      .search-bar {
        flex-basis: 100%;
        margin-top: 0.4rem;
      }

      .datetime {
        width: 100%;
        align-items: flex-start;
      }

      .main-display {
        flex-direction: row;
      }
    }

    /* Keyframes */
    @keyframes orbFloat1 {
      0% {
        transform: translate3d(0, 0, 0);
      }
      50% {
        transform: translate3d(16px, 22px, 0);
      }
      100% {
        transform: translate3d(-10px, 30px, 0);
      }
    }

    @keyframes orbFloat2 {
      0% {
        transform: translate3d(0, 0, 0);
      }
      50% {
        transform: translate3d(-18px, -18px, 0);
      }
      100% {
        transform: translate3d(14px, -24px, 0);
      }
    }

    @keyframes shellSweep {
      0% {
        transform: translate3d(-8%, 0, 0) rotate(7deg);
      }
      100% {
        transform: translate3d(10%, 0, 0) rotate(7deg);
      }
    }

    @keyframes cardFadeIn {
      0% {
        opacity: 0;
        transform: translate3d(0, 16px, 0) scale(0.98);
      }
      100% {
        opacity: 1;
        transform: translate3d(0, 0, 0) scale(1);
      }
    }

    @keyframes fadeUp {
      0% {
        opacity: 0;
        transform: translateY(10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes spin-slow {
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes pulse {
      0%,
      100% {
        transform: scale(1);
        box-shadow:
          0 0 0 2px rgba(253, 224, 71, 0.8),
          0 0 26px rgba(250, 204, 21, 1);
      }
      50% {
        transform: scale(1.06);
        box-shadow:
          0 0 0 2px rgba(254, 240, 138, 0.9),
          0 0 40px rgba(250, 204, 21, 1);
      }
    }

    @keyframes floatCloud {
      0%,
      100% {
        transform: translateX(0) translateY(1px);
      }
      50% {
        transform: translateX(6px) translateY(-2px);
      }
    }

    @keyframes rainFall {
      0% {
        transform: translateY(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        transform: translateY(22px);
        opacity: 1;
      }
      100% {
        transform: translateY(26px);
        opacity: 0;
      }
    }

    @keyframes snowFall {
      0% {
        transform: translateY(0) translateX(0) scale(0.85);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      60% {
        transform: translateY(18px) translateX(4px) scale(1);
      }
      100% {
        transform: translateY(26px) translateX(6px) scale(0.9);
        opacity: 0;
      }
    }

    @keyframes drift {
      0%,
      100% {
        transform: translateX(0);
      }
      50% {
        transform: translateX(10px);
      }
    }

    @keyframes twinkle {
      0% {
        opacity: 0.4;
        transform: scale(0.7);
      }
      50% {
        opacity: 1;
        transform: scale(1);
      }
      100% {
        opacity: 0.4;
        transform: scale(0.7);
      }
    }

    @keyframes blink {
      0%,
      60% {
        opacity: 1;
      }
      61%,
      70% {
        opacity: 0.1;
      }
      71%,
      100% {
        opacity: 1;
      }
    }
  </style>
</head>
<body class="theme-clear">
  <!-- Background Orbs -->
  <div class="bg-orb bg-orb-1"></div>
  <div class="bg-orb bg-orb-2"></div>

  <div class="app" id="app">
    <div class="app-inner">
      <!-- Top Bar -->
      <header class="top-bar">
        <div class="brand">
          <div class="brand-mark" aria-hidden="true"></div>
          <div class="brand-text">
            <div class="brand-title">Aurora Weather</div>
            <div class="brand-subtitle">Live forecast in a neon glass UI</div>
          </div>
        </div>

        <form class="search-bar" id="searchForm">
          <div class="search-input-wrap">
            <input
              type="text"
              id="cityInput"
              class="search-input"
              placeholder="Search city (e.g. Tokyo, Paris)"
              autocomplete="off"
              spellcheck="false"
            />
          </div>
          <button type="submit" class="btn-search">
            <span class="btn-search-label">Search</span>
            <span class="btn-loader" aria-hidden="true"></span>
          </button>
          <button
            type="button"
            class="btn-geo"
            id="geoBtn"
            title="Use my location"
            aria-label="Use my location"
          >
            <span class="btn-geo-icon" aria-hidden="true">⌖</span>
          </button>
        </form>
      </header>

      <!-- Weather Card -->
      <main class="weather-card" id="weatherCard">
        <div class="card-row">
          <div class="loc-block">
            <div class="city-name" id="cityName">Search a city</div>
            <div class="country-badge">
              <span class="country-dot" aria-hidden="true"></span>
              <span id="countryCode">Waiting for location...</span>
            </div>
          </div>
          <div class="datetime">
            <div class="datetime-main" id="timeText">--:--</div>
            <div class="datetime-sub" id="dateText">--</div>
          </div>
        </div>

        <section class="main-display" aria-label="Current weather">
          <div class="weather-icon" id="weatherIcon" aria-hidden="true">
            <!-- Icon injected by JS -->
          </div>

          <div class="temp-block">
            <div class="temp-main">
              <span id="tempValue">--</span>
              <span class="temp-unit">°C</span>
            </div>
            <div class="condition-text" id="conditionText">
              Type a city and hit search
            </div>
            <div class="feels-like" id="feelsText">
              Feels like —°C
            </div>
          </div>
        </section>

        <section class="metrics-row" aria-label="Additional weather details">
          <div class="metric">
            <div class="metric-label">High / Low</div>
            <div class="metric-value">
              <span id="tempHigh">--</span>° / <span id="tempLow">--</span>°
            </div>
            <div class="metric-sub">Today</div>
          </div>
          <div class="metric">
            <div class="metric-label">Humidity</div>
            <div class="metric-value">
              <span id="humidity">--</span>%
            </div>
            <div class="metric-sub">Relative</div>
          </div>
          <div class="metric">
            <div class="metric-label">Wind</div>
            <div class="metric-value">
              <span id="wind">--</span> km/h
            </div>
            <div class="metric-sub">Surface</div>
          </div>
        </section>

        <p class="status-message" id="statusMessage">
          Tip: Allow location or search for your city to get started.
        </p>
      </main>
    </div>
  </div>

  <script>
    "use strict";

    // NOTE:
    // Replace "YOUR_OPENWEATHERMAP_API_KEY_HERE" with your actual OpenWeatherMap API key.
    // Get one for free at https://openweathermap.org/api
    const API_KEY = "e53025d362e94b95f1428970f69dc190";

    const appEl = document.getElementById("app");
    const cardEl = document.getElementById("weatherCard");
    const iconContainer = document.getElementById("weatherIcon");

    const cityNameEl = document.getElementById("cityName");
    const countryCodeEl = document.getElementById("countryCode");
    const tempValueEl = document.getElementById("tempValue");
    const conditionTextEl = document.getElementById("conditionText");
    const feelsTextEl = document.getElementById("feelsText");
    const tempHighEl = document.getElementById("tempHigh");
    const tempLowEl = document.getElementById("tempLow");
    const humidityEl = document.getElementById("humidity");
    const windEl = document.getElementById("wind");
    const statusMessageEl = document.getElementById("statusMessage");
    const timeTextEl = document.getElementById("timeText");
    const dateTextEl = document.getElementById("dateText");

    const searchForm = document.getElementById("searchForm");
    const cityInput = document.getElementById("cityInput");
    const geoBtn = document.getElementById("geoBtn");

    // Track last request to avoid race conditions
    let lastRequestId = 0;

    /**
     * Toggle loading state on the app (affects search button)
     */
    function setLoading(isLoading) {
      if (isLoading) {
        appEl.classList.add("loading");
      } else {
        appEl.classList.remove("loading");
      }
    }

    /**
     * Show status message (error or normal)
     */
    function showStatus(message, type = "") {
      statusMessageEl.textContent = message || "";
      statusMessageEl.classList.remove("error", "success");
      if (type) {
        statusMessageEl.classList.add(type);
      }
    }

    /**
     * Format local date/time nicely (using user's local time)
     */
    function updateDateTime() {
      const now = new Date();
      const time = now.toLocaleTimeString([], {
        hour: "2-digit",
        minute: "2-digit"
      });
      const date = now.toLocaleDateString([], {
        weekday: "short",
        month: "short",
        day: "numeric",
        year: "numeric"
      });
      timeTextEl.textContent = time;
      dateTextEl.textContent = date;
    }

    /**
     * Map OpenWeather condition -> theme string
     */
    function deriveTheme(weatherId, iconCode) {
      const isNight = iconCode && iconCode.endsWith("n");

      if (isNight) return "night";

      if (weatherId >= 200 && weatherId < 300) return "thunder"; // Thunderstorm
      if (weatherId >= 300 && weatherId < 600) return "rain"; // Drizzle/Rain
      if (weatherId >= 600 && weatherId < 700) return "snow"; // Snow
      if (weatherId >= 700 && weatherId < 800) return "mist"; // Mist/Haze/Fog
      if (weatherId === 800) return "clear"; // Clear
      if (weatherId > 800 && weatherId < 900) return "clouds"; // Clouds

      return "clear";
    }

    /**
     * Apply theme to <body> for background changes
     */
    function applyTheme(theme) {
      const themes = [
        "theme-clear",
        "theme-clouds",
        "theme-rain",
        "theme-thunder",
        "theme-snow",
        "theme-mist",
        "theme-night"
      ];
      document.body.classList.remove(...themes);
      document.body.classList.add(`theme-${theme}`);
    }

    /**
     * Render animated weather icon into container
     */
    function renderIcon(theme) {
      let html = "";

      if (theme === "clear") {
        html = `
          <div class="icon-sun">
            <div class="sun-core"></div>
            <div class="sun-rays"></div>
          </div>
        `;
      } else if (theme === "clouds") {
        html = `
          <div class="icon-cloud">
            <div class="cloud back cloud-back"></div>
            <div class="cloud"></div>
          </div>
        `;
      } else if (theme === "rain") {
        html = `
          <div class="icon-rain">
            <div class="cloud"></div>
            <div class="raindrop"></div>
            <div class="raindrop"></div>
            <div class="raindrop"></div>
          </div>
        `;
      } else if (theme === "snow") {
        html = `
          <div class="icon-snow">
            <div class="cloud"></div>
            <div class="flake"></div>
            <div class="flake"></div>
            <div class="flake"></div>
          </div>
        `;
      } else if (theme === "mist") {
        html = `
          <div class="icon-mist">
            <div class="cloud cloud-back"></div>
            <div class="mist-layer"></div>
          </div>
        `;
      } else if (theme === "thunder") {
        html = `
          <div class="icon-thunder">
            <div class="cloud"></div>
            <div class="bolt"></div>
          </div>
        `;
      } else if (theme === "night") {
        html = `
          <div class="icon-night">
            <div class="moon"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="cloud cloud-back"></div>
          </div>
        `;
      } else {
        // Fallback: clear
        html = `
          <div class="icon-sun">
            <div class="sun-core"></div>
            <div class="sun-rays"></div>
          </div>
        `;
      }

      iconContainer.innerHTML = html;
    }

    /**
     * Trigger a subtle fade-in animation on the card
     */
    function animateCard() {
      cardEl.classList.remove("fade-in-active");
      // Force reflow to restart animation
      void cardEl.offsetWidth;
      cardEl.classList.add("fade-in-active");
    }

    /**
     * Capitalize first letter of each word
     */
    function titleCase(str) {
      return str
        .toLowerCase()
        .split(" ")
        .map((w) => w.charAt(0).toUpperCase() + w.slice(1))
        .join(" ");
    }

    /**
     * Update UI with weather data from OpenWeatherMap
     */
    function updateWeatherUI(data) {
      const { name, sys, main, weather, wind } = data;
      const w = weather[0];

      cityNameEl.textContent = name || "Unknown location";
      countryCodeEl.textContent = sys && sys.country ? sys.country : "—";

      const temp = Math.round(main.temp);
      const feels = Math.round(main.feels_like);
      const tMin = Math.round(main.temp_min);
      const tMax = Math.round(main.temp_max);
      const humidity = main.humidity;
      const windKmh = wind && typeof wind.speed === "number"
        ? Math.round(wind.speed * 3.6)
        : "--";

      tempValueEl.textContent = Number.isFinite(temp) ? temp : "--";
      feelsTextEl.textContent = Number.isFinite(feels)
        ? `Feels like ${feels}°C`
        : "Feels like —°C";

      tempHighEl.textContent = Number.isFinite(tMax) ? tMax : "--";
      tempLowEl.textContent = Number.isFinite(tMin) ? tMin : "--";
      humidityEl.textContent = Number.isFinite(humidity) ? humidity : "--";
      windEl.textContent = windKmh;

      const description = w.description || w.main || "—";
      conditionTextEl.textContent = titleCase(description);

      // Theme + icon
      const theme = deriveTheme(w.id, w.icon);
      applyTheme(theme);
      renderIcon(theme);

      updateDateTime();
      animateCard();
      showStatus("Live data from OpenWeatherMap.", "success");
    }

    /**
     * Fetch weather by city name
     */
    async function fetchWeatherByCity(city) {
      if (!city) {
        showStatus("Please enter a city name.", "error");
        return;
      }

      if (!API_KEY || API_KEY === "YOUR_OPENWEATHERMAP_API_KEY_HERE") {
        showStatus(
          "Missing OpenWeatherMap API key. Please add your API key in the code.",
          "error"
        );
        return;
      }

      const requestId = ++lastRequestId;
      setLoading(true);
      showStatus("Fetching latest weather…");

      try {
        const url = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(
          city
        )}&units=metric&appid=${API_KEY}`;

        const res = await fetch(url);
        const data = await res.json();

        if (!res.ok) {
          const msg = data && data.message ? data.message : "City not found.";
          throw new Error(titleCase(msg));
        }

        // Ignore out-of-order responses
        if (requestId !== lastRequestId) return;

        updateWeatherUI(data);
      } catch (err) {
        console.error(err);
        showStatus(err.message || "Unable to fetch weather right now.", "error");
      } finally {
        setLoading(false);
      }
    }

    /**
     * Fetch weather by coordinates (lat/lon)
     */
    async function fetchWeatherByCoords(lat, lon) {
      if (!API_KEY || API_KEY === "YOUR_OPENWEATHERMAP_API_KEY_HERE") {
        showStatus(
          "Missing OpenWeatherMap API key. Please add your API key in the code.",
          "error"
        );
        return;
      }

      const requestId = ++lastRequestId;
      setLoading(true);
      showStatus("Getting weather for your location…");

      try {
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${API_KEY}`;

        const res = await fetch(url);
        const data = await res.json();

        if (!res.ok) {
          const msg = data && data.message ? data.message : "Location error.";
          throw new Error(titleCase(msg));
        }

        if (requestId !== lastRequestId) return;

        updateWeatherUI(data);
      } catch (err) {
        console.error(err);
        showStatus(err.message || "Unable to fetch weather for your location.", "error");
      } finally {
        setLoading(false);
      }
    }

    /**
     * Wrap Geolocation API into a Promise
     */
    function getCurrentPositionPromise(options = {}) {
      return new Promise((resolve, reject) => {
        if (!("geolocation" in navigator)) {
          reject(new Error("Geolocation not supported."));
          return;
        }
        navigator.geolocation.getCurrentPosition(resolve, reject, options);
      });
    }

    /**
     * Initialize app: try geolocation once, otherwise show default city
     */
    async function init() {
      updateDateTime();

      // Update time every minute
      setInterval(updateDateTime, 60_000);

      // Try geolocation first
      try {
        const position = await getCurrentPositionPromise({
          enableHighAccuracy: false,
          timeout: 8000,
          maximumAge: 10 * 60 * 1000
        });

        const { latitude, longitude } = position.coords;
        fetchWeatherByCoords(latitude, longitude);
      } catch (err) {
        console.warn("Geolocation unavailable or denied:", err.message);
        showStatus(
          "Location access denied. Showing an example city.",
          "error"
        );
        // Fallback city
        fetchWeatherByCity("New York");
      }
    }

    // Event: search form submit
    searchForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const city = cityInput.value.trim();
      fetchWeatherByCity(city);
    });

    // Event: use my location
    geoBtn.addEventListener("click", async () => {
      try {
        const position = await getCurrentPositionPromise({
          enableHighAccuracy: false,
          timeout: 8000,
          maximumAge: 10 * 60 * 1000
        });
        const { latitude, longitude } = position.coords;
        fetchWeatherByCoords(latitude, longitude);
      } catch (err) {
        console.error(err);
        showStatus(
          "Unable to access your location. Please check permissions.",
          "error"
        );
      }
    });

    // Initialize app on load
    init();
  </script>
</body>
</html>